{
  "kpi_category": "Manufacturing KPIs",
  "description": "제조업 핵심 성과 지표(KPI) 정의 및 계산 공식",
  "kpis": [
    {
      "kpi_id": "KPI001",
      "kpi_name": "OEE (Overall Equipment Effectiveness)",
      "kpi_name_kr": "설비종합효율",
      "category": "생산성",
      "description": "설비의 전체적인 효율성을 측정하는 지표. 가용성, 성능, 품질 세 가지 요소의 곱으로 계산",
      "formula": "OEE = 가용성(Availability) × 성능(Performance) × 품질(Quality)",
      "sub_formulas": {
        "availability": "(실제가동시간 / 계획가동시간) × 100",
        "performance": "(실제생산량 × 표준사이클타임) / 실제가동시간 × 100",
        "quality": "(양품수량 / 총생산량) × 100"
      },
      "unit": "%",
      "target_value": "85% 이상 (World Class)",
      "related_tables": ["equipment_logs", "production_orders", "quality_inspections"],
      "sql_example": "SELECT \n  (SUM(running_time) / SUM(running_time + idle_time + down_time)) * \n  (SUM(cycle_count) * p.standard_cycle_time / SUM(running_time)) * \n  (SUM(po.good_quantity) / SUM(po.actual_quantity)) * 100 as OEE\nFROM equipment_logs el\nJOIN production_orders po ON el.equipment_id = po.equipment_id\nJOIN products p ON po.product_id = p.product_id",
      "interpretation": "OEE 85% 이상: World Class, 60-85%: 양호, 40-60%: 개선 필요, 40% 미만: 심각"
    },
    {
      "kpi_id": "KPI002",
      "kpi_name": "Defect Rate",
      "kpi_name_kr": "불량률",
      "category": "품질",
      "description": "총 생산량 대비 불량품의 비율. 품질 수준을 나타내는 핵심 지표",
      "formula": "불량률 = (불량수량 / 총생산수량) × 100",
      "unit": "%",
      "target_value": "1% 이하",
      "related_tables": ["production_orders", "defect_records", "quality_inspections"],
      "sql_example": "SELECT \n  (SUM(defect_quantity) / SUM(actual_quantity)) * 100 as defect_rate\nFROM production_orders\nWHERE order_status = 'completed'\n  AND DATE(actual_end_time) BETWEEN @start_date AND @end_date",
      "interpretation": "낮을수록 좋음. 불량률 증가 시 원인 분석 및 개선 활동 필요"
    },
    {
      "kpi_id": "KPI003",
      "kpi_name": "Yield Rate",
      "kpi_name_kr": "수율",
      "category": "품질",
      "description": "총 생산량 대비 양품의 비율. 공정의 품질 효율성을 나타냄",
      "formula": "수율 = (양품수량 / 총생산수량) × 100",
      "unit": "%",
      "target_value": "98% 이상",
      "related_tables": ["production_orders", "quality_inspections"],
      "sql_example": "SELECT \n  (SUM(good_quantity) / SUM(actual_quantity)) * 100 as yield_rate\nFROM production_orders\nWHERE order_status = 'completed'",
      "interpretation": "높을수록 좋음. 100%에 가까울수록 공정 품질이 우수"
    },
    {
      "kpi_id": "KPI004",
      "kpi_name": "Production Achievement Rate",
      "kpi_name_kr": "생산달성률",
      "category": "생산성",
      "description": "계획 생산량 대비 실제 생산량의 비율",
      "formula": "생산달성률 = (실제생산량 / 계획생산량) × 100",
      "unit": "%",
      "target_value": "95% 이상",
      "related_tables": ["production_orders"],
      "sql_example": "SELECT \n  (SUM(actual_quantity) / SUM(planned_quantity)) * 100 as achievement_rate\nFROM production_orders\nWHERE order_status = 'completed'\n  AND DATE(planned_start_time) BETWEEN @start_date AND @end_date",
      "interpretation": "100%가 목표. 100% 초과 시 과잉생산 여부 확인 필요"
    },
    {
      "kpi_id": "KPI005",
      "kpi_name": "MTBF (Mean Time Between Failures)",
      "kpi_name_kr": "평균고장간격",
      "category": "설비",
      "description": "설비 고장 사이의 평균 가동 시간. 설비 신뢰성 지표",
      "formula": "MTBF = 총가동시간 / 고장횟수",
      "unit": "시간",
      "target_value": "설비별 상이 (높을수록 좋음)",
      "related_tables": ["equipment_logs", "maintenance_records"],
      "sql_example": "SELECT \n  e.equipment_id,\n  SUM(el.running_time) / 60.0 / COUNT(DISTINCT CASE WHEN mr.maintenance_type = 'breakdown' THEN mr.maintenance_id END) as MTBF_hours\nFROM equipment e\nLEFT JOIN equipment_logs el ON e.equipment_id = el.equipment_id\nLEFT JOIN maintenance_records mr ON e.equipment_id = mr.equipment_id\nGROUP BY e.equipment_id",
      "interpretation": "높을수록 좋음. 설비가 고장 없이 오래 가동됨을 의미"
    },
    {
      "kpi_id": "KPI006",
      "kpi_name": "MTTR (Mean Time To Repair)",
      "kpi_name_kr": "평균수리시간",
      "category": "설비",
      "description": "고장 발생 시 수리에 소요되는 평균 시간. 정비 효율성 지표",
      "formula": "MTTR = 총수리시간 / 수리횟수",
      "unit": "시간",
      "target_value": "설비별 상이 (낮을수록 좋음)",
      "related_tables": ["maintenance_records"],
      "sql_example": "SELECT \n  equipment_id,\n  AVG(TIMESTAMPDIFF(HOUR, start_time, end_time)) as MTTR_hours\nFROM maintenance_records\nWHERE maintenance_type IN ('breakdown', 'corrective')\n  AND result = 'completed'\nGROUP BY equipment_id",
      "interpretation": "낮을수록 좋음. 빠른 수리로 가동률 향상"
    },
    {
      "kpi_id": "KPI007",
      "kpi_name": "Equipment Availability",
      "kpi_name_kr": "설비가동률",
      "category": "설비",
      "description": "계획된 가동 시간 대비 실제 가동 시간의 비율",
      "formula": "설비가동률 = (실제가동시간 / 계획가동시간) × 100 = MTBF / (MTBF + MTTR) × 100",
      "unit": "%",
      "target_value": "90% 이상",
      "related_tables": ["equipment_logs", "production_lines"],
      "sql_example": "SELECT \n  el.equipment_id,\n  (SUM(el.running_time) / (SUM(el.running_time + el.idle_time + el.down_time))) * 100 as availability\nFROM equipment_logs el\nWHERE DATE(el.log_time) BETWEEN @start_date AND @end_date\nGROUP BY el.equipment_id",
      "interpretation": "높을수록 좋음. 비가동 시간 최소화 필요"
    },
    {
      "kpi_id": "KPI008",
      "kpi_name": "Cycle Time",
      "kpi_name_kr": "사이클타임",
      "category": "생산성",
      "description": "제품 1단위를 생산하는 데 소요되는 시간",
      "formula": "사이클타임 = 총생산시간 / 총생산수량",
      "unit": "초/개",
      "target_value": "표준 사이클타임 이하",
      "related_tables": ["production_orders", "products"],
      "sql_example": "SELECT \n  po.product_id,\n  AVG(TIMESTAMPDIFF(SECOND, po.actual_start_time, po.actual_end_time) / po.actual_quantity) as actual_cycle_time,\n  p.standard_cycle_time\nFROM production_orders po\nJOIN products p ON po.product_id = p.product_id\nWHERE po.order_status = 'completed'\nGROUP BY po.product_id, p.standard_cycle_time",
      "interpretation": "표준 대비 실제 사이클타임 비교로 생산 효율 분석"
    },
    {
      "kpi_id": "KPI009",
      "kpi_name": "Throughput",
      "kpi_name_kr": "처리량",
      "category": "생산성",
      "description": "단위 시간당 생산되는 제품의 수량",
      "formula": "처리량 = 총생산수량 / 총생산시간",
      "unit": "개/시간",
      "target_value": "라인별 목표 생산량 이상",
      "related_tables": ["production_orders", "production_lines"],
      "sql_example": "SELECT \n  line_id,\n  SUM(actual_quantity) / SUM(TIMESTAMPDIFF(HOUR, actual_start_time, actual_end_time)) as throughput_per_hour\nFROM production_orders\nWHERE order_status = 'completed'\n  AND DATE(actual_start_time) = @target_date\nGROUP BY line_id",
      "interpretation": "높을수록 좋음. 라인 생산 능력 대비 비교 분석"
    },
    {
      "kpi_id": "KPI010",
      "kpi_name": "Inventory Turnover",
      "kpi_name_kr": "재고회전율",
      "category": "재고",
      "description": "일정 기간 동안 재고가 몇 번 회전했는지를 나타내는 지표",
      "formula": "재고회전율 = 출고금액(매출원가) / 평균재고금액",
      "unit": "회",
      "target_value": "산업별 상이 (높을수록 좋음)",
      "related_tables": ["inventory", "materials", "production_orders"],
      "sql_example": "SELECT \n  m.material_id,\n  SUM(bd.quantity_per * po.actual_quantity * m.unit_cost) / \n  AVG(i.quantity * m.unit_cost) as inventory_turnover\nFROM materials m\nJOIN bom_details bd ON m.material_id = bd.material_id\nJOIN bom_master bm ON bd.bom_id = bm.bom_id\nJOIN production_orders po ON bm.product_id = po.product_id\nJOIN inventory i ON m.material_id = i.material_id\nWHERE po.order_status = 'completed'\nGROUP BY m.material_id",
      "interpretation": "높을수록 재고 효율성 우수. 너무 높으면 재고 부족 위험"
    },
    {
      "kpi_id": "KPI011",
      "kpi_name": "Days of Inventory",
      "kpi_name_kr": "재고일수",
      "category": "재고",
      "description": "현재 재고로 며칠간 생산 가능한지를 나타내는 지표",
      "formula": "재고일수 = (현재재고량 / 일평균소비량)",
      "unit": "일",
      "target_value": "안전재고 + 리드타임 수준",
      "related_tables": ["inventory", "materials", "production_orders"],
      "sql_example": "SELECT \n  i.material_id,\n  m.material_name,\n  i.quantity / (SUM(bd.quantity_per * po.actual_quantity) / 30) as days_of_inventory\nFROM inventory i\nJOIN materials m ON i.material_id = m.material_id\nJOIN bom_details bd ON m.material_id = bd.material_id\nJOIN bom_master bm ON bd.bom_id = bm.bom_id\nJOIN production_orders po ON bm.product_id = po.product_id\nWHERE po.actual_end_time >= DATE_SUB(CURDATE(), INTERVAL 30 DAY)\nGROUP BY i.material_id, m.material_name, i.quantity",
      "interpretation": "적정 수준 유지 필요. 너무 높으면 과잉재고, 너무 낮으면 재고 부족"
    },
    {
      "kpi_id": "KPI012",
      "kpi_name": "Downtime Rate",
      "kpi_name_kr": "비가동률",
      "category": "설비",
      "description": "전체 시간 대비 설비가 가동되지 않은 시간의 비율",
      "formula": "비가동률 = (비가동시간 / 총가용시간) × 100",
      "unit": "%",
      "target_value": "10% 이하",
      "related_tables": ["equipment_logs", "downtime_reasons"],
      "sql_example": "SELECT \n  el.equipment_id,\n  (SUM(el.down_time) / SUM(el.running_time + el.idle_time + el.down_time)) * 100 as downtime_rate,\n  dr.reason_category,\n  SUM(el.down_time) as total_downtime_minutes\nFROM equipment_logs el\nLEFT JOIN downtime_reasons dr ON el.down_reason = dr.reason_code\nWHERE DATE(el.log_time) BETWEEN @start_date AND @end_date\nGROUP BY el.equipment_id, dr.reason_category",
      "interpretation": "낮을수록 좋음. 비가동 원인별 분석으로 개선 포인트 도출"
    },
    {
      "kpi_id": "KPI013",
      "kpi_name": "First Pass Yield (FPY)",
      "kpi_name_kr": "초도수율",
      "category": "품질",
      "description": "재작업 없이 처음 검사에서 합격한 제품의 비율",
      "formula": "초도수율 = (초도합격수량 / 총검사수량) × 100",
      "unit": "%",
      "target_value": "95% 이상",
      "related_tables": ["quality_inspections", "defect_records"],
      "sql_example": "SELECT \n  qi.product_id,\n  (SUM(qi.pass_quantity) / SUM(qi.sample_size)) * 100 as first_pass_yield\nFROM quality_inspections qi\nWHERE qi.inspection_type = 'process'\nGROUP BY qi.product_id",
      "interpretation": "높을수록 좋음. 재작업 비용 절감과 직결"
    },
    {
      "kpi_id": "KPI014",
      "kpi_name": "Scrap Rate",
      "kpi_name_kr": "스크랩률",
      "category": "품질",
      "description": "총 생산량 대비 폐기 처리된 불량품의 비율",
      "formula": "스크랩률 = (폐기수량 / 총생산수량) × 100",
      "unit": "%",
      "target_value": "0.5% 이하",
      "related_tables": ["defect_records", "production_orders"],
      "sql_example": "SELECT \n  (SUM(CASE WHEN dr.action_taken LIKE '%폐기%' OR dr.action_taken LIKE '%scrap%' THEN dr.defect_quantity ELSE 0 END) / \n   SUM(po.actual_quantity)) * 100 as scrap_rate\nFROM production_orders po\nLEFT JOIN quality_inspections qi ON po.order_id = qi.order_id\nLEFT JOIN defect_records dr ON qi.inspection_id = dr.inspection_id\nWHERE po.order_status = 'completed'",
      "interpretation": "낮을수록 좋음. 원자재 손실 비용과 직결"
    },
    {
      "kpi_id": "KPI015",
      "kpi_name": "On-Time Delivery Rate",
      "kpi_name_kr": "납기준수율",
      "category": "생산성",
      "description": "계획된 납기 내에 완료된 생산 오더의 비율",
      "formula": "납기준수율 = (납기 내 완료 건수 / 총 완료 건수) × 100",
      "unit": "%",
      "target_value": "95% 이상",
      "related_tables": ["production_orders"],
      "sql_example": "SELECT \n  (COUNT(CASE WHEN actual_end_time <= planned_end_time THEN 1 END) / COUNT(*)) * 100 as on_time_rate\nFROM production_orders\nWHERE order_status = 'completed'\n  AND DATE(planned_end_time) BETWEEN @start_date AND @end_date",
      "interpretation": "높을수록 좋음. 고객 만족도와 직결"
    },
    {
      "kpi_id": "KPI016",
      "kpi_name": "Labor Productivity",
      "kpi_name_kr": "노동생산성",
      "category": "생산성",
      "description": "작업자 1인당 생산량 또는 투입 시간 대비 생산량",
      "formula": "노동생산성 = 총생산량 / 총투입인시",
      "unit": "개/인시",
      "target_value": "전월 대비 향상",
      "related_tables": ["work_orders", "employees", "production_orders"],
      "sql_example": "SELECT \n  DATE(wo.start_time) as work_date,\n  SUM(wo.output_quantity) / COUNT(DISTINCT wo.employee_id) / \n    SUM(TIMESTAMPDIFF(HOUR, wo.start_time, wo.end_time)) as productivity\nFROM work_orders wo\nWHERE wo.status = 'completed'\nGROUP BY DATE(wo.start_time)",
      "interpretation": "높을수록 좋음. 인력 효율성 지표"
    },
    {
      "kpi_id": "KPI017",
      "kpi_name": "Energy Consumption per Unit",
      "kpi_name_kr": "단위당에너지소비",
      "category": "비용",
      "description": "제품 1단위 생산에 소요되는 에너지량",
      "formula": "단위당에너지소비 = 총에너지소비량 / 총생산량",
      "unit": "kWh/개",
      "target_value": "전월 대비 감소",
      "related_tables": ["energy_consumption", "production_orders"],
      "sql_example": "SELECT \n  ec.line_id,\n  SUM(ec.electricity_kwh) / SUM(po.actual_quantity) as energy_per_unit\nFROM energy_consumption ec\nJOIN production_orders po ON ec.line_id = po.line_id \n  AND ec.consumption_date = DATE(po.actual_start_time)\nWHERE po.order_status = 'completed'\nGROUP BY ec.line_id",
      "interpretation": "낮을수록 좋음. 에너지 효율성 및 비용 절감 지표"
    },
    {
      "kpi_id": "KPI018",
      "kpi_name": "Maintenance Cost Rate",
      "kpi_name_kr": "정비비율",
      "category": "비용",
      "description": "총 생산비용 대비 설비 정비 비용의 비율",
      "formula": "정비비율 = (정비비용 / 총생산비용) × 100",
      "unit": "%",
      "target_value": "3-5%",
      "related_tables": ["maintenance_records", "production_orders"],
      "sql_example": "SELECT \n  DATE_FORMAT(mr.start_time, '%Y-%m') as month,\n  SUM(mr.cost) as total_maintenance_cost,\n  COUNT(DISTINCT mr.maintenance_id) as maintenance_count\nFROM maintenance_records mr\nWHERE mr.result = 'completed'\nGROUP BY DATE_FORMAT(mr.start_time, '%Y-%m')",
      "interpretation": "적정 수준 유지 필요. 너무 낮으면 예방정비 부족, 너무 높으면 설비 노후화"
    },
    {
      "kpi_id": "KPI019",
      "kpi_name": "Work-in-Process (WIP) Level",
      "kpi_name_kr": "재공품수준",
      "category": "재고",
      "description": "생산 중인 재공품의 수량 또는 금액",
      "formula": "재공품수준 = 투입수량 - 완료수량",
      "unit": "개 또는 금액",
      "target_value": "최소 수준 유지",
      "related_tables": ["production_orders", "inventory"],
      "sql_example": "SELECT \n  line_id,\n  SUM(CASE WHEN order_status = 'in_progress' THEN planned_quantity - COALESCE(actual_quantity, 0) ELSE 0 END) as wip_quantity\nFROM production_orders\nGROUP BY line_id",
      "interpretation": "낮을수록 좋음. 리드타임 단축과 재고 비용 절감"
    },
    {
      "kpi_id": "KPI020",
      "kpi_name": "Supplier Quality Rate",
      "kpi_name_kr": "협력사품질률",
      "category": "품질",
      "description": "협력사로부터 입고된 자재의 품질 합격률",
      "formula": "협력사품질률 = (수입검사 합격수량 / 총입고수량) × 100",
      "unit": "%",
      "target_value": "99% 이상",
      "related_tables": ["quality_inspections", "materials", "suppliers"],
      "sql_example": "SELECT \n  s.supplier_id,\n  s.supplier_name,\n  (SUM(qi.pass_quantity) / SUM(qi.sample_size)) * 100 as supplier_quality_rate\nFROM quality_inspections qi\nJOIN materials m ON qi.product_id = m.material_id\nJOIN suppliers s ON m.supplier_id = s.supplier_id\nWHERE qi.inspection_type = 'incoming'\nGROUP BY s.supplier_id, s.supplier_name",
      "interpretation": "높을수록 좋음. 협력사 평가 및 개선 활동의 기준"
    }
  ]
}